<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº²çˆ±çš„ä¼‘é—²å°ç«™ â¤ï¸</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        }
        
        body {
            background-color: #fff5f7;
            color: #555;
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }
        
        /* è£…é¥°æ€§å…ƒç´  */
        .heart {
            position: absolute;
            font-size: 20px;
            color: #ff9eb5;
            z-index: -1;
            animation: float 6s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* å¤´éƒ¨æ ·å¼ */
        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #ffb6c1 0%, #ffccd5 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(255, 182, 193, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        header h1 {
            font-size: 2.8rem;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
        }
        
        header p {
            font-size: 1.2rem;
            color: #fff;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.9;
        }
        
        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .card {
            background-color: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }
        
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(255, 182, 193, 0.2);
            border-color: #ffb6c1;
        }
        
        .card-icon {
            font-size: 2.5rem;
            color: #ff9eb5;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .card h2 {
            font-size: 1.8rem;
            color: #ff6b8b;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .card p {
            color: #666;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .btn {
            display: block;
            width: 80%;
            margin: 0 auto;
            padding: 12px 20px;
            background: linear-gradient(to right, #ff9eb5, #ffb6c1);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: bold;
            letter-spacing: 1px;
        }
        
        .btn:hover {
            background: linear-gradient(to right, #ff7b9c, #ff9eb5);
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 107, 139, 0.3);
        }
        
        /* æ¨¡å—å†…å®¹ */
        .module-content {
            display: none;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px dashed #ffccd5;
        }
        
        .module-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ä¸ªæ€§åŒ–è®¾ç½® */
        #colorPicker {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s;
            border: 3px solid white;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        /* ä¾¿ç­¾æ ·å¼ */
        .notes-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .note {
            width: 150px;
            height: 150px;
            padding: 15px;
            background-color: #fffacd;
            border-radius: 10px;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.1);
            position: relative;
            transform: rotate(-2deg);
            transition: transform 0.3s;
        }
        
        .note:hover {
            transform: rotate(0deg) scale(1.05);
        }
        
        .note textarea {
            width: 100%;
            height: 100%;
            border: none;
            background: transparent;
            resize: none;
            font-size: 14px;
            outline: none;
            color: #555;
        }
        
        .add-note {
            background-color: #ffccd5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #ff6b8b;
            cursor: pointer;
        }
        
        /* æ¸¸æˆåŒºåŸŸ */
        #gameArea {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        #emojiGrid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .emoji-card {
            width: 70px;
            height: 70px;
            background-color: #ffe6ee;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
        }
        
        .emoji-card.flipped {
            background-color: #ffb6c1;
            transform: rotateY(180deg);
        }
        
        /* éŸ³ä¹æ’­æ”¾å™¨ */
        .player-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .player-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #ff9eb5;
            color: white;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .player-btn:hover {
            background-color: #ff7b9c;
            transform: scale(1.1);
        }
        
        /* é¡µè„š */
        footer {
            text-align: center;
            padding: 30px;
            margin-top: 40px;
            background: linear-gradient(135deg, #ffccd5 0%, #ffb6c1 100%);
            border-radius: 20px;
            color: white;
        }
        
        footer p {
            margin: 10px 0;
            font-size: 1.1rem;
        }
        
        .love-message {
            font-size: 1.3rem;
            margin-top: 20px;
            color: #ff2e63;
            font-weight: bold;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2.2rem;
            }
            
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .emoji-card {
                width: 60px;
                height: 60px;
            }
        }
        
        /* éšè—æ¨¡å—çš„åˆå§‹çŠ¶æ€ */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- è£…é¥°æ€§çˆ±å¿ƒ -->
    <div id="heartsContainer"></div>
    
    <div class="container">
        <header>
<!--            <h1>â¤ï¸ äº²çˆ±çš„ä¼‘é—²å°ç«™ â¤ï¸</h1>-->
            <h1> H&Z </h1>
 <!--           <p>ä¸“é—¨ä¸ºä½ æ‰“é€ çš„å¯çˆ±ç©ºé—´ï¼Œå¸Œæœ›ä½ å–œæ¬¢~</p>-->
        </header>
        
        <div class="main-content">
            <!-- ä¸ªæ€§åŒ–ä¸»é¢˜ -->
            <div class="card">
                <div class="card-icon">
                    <i class="fas fa-palette"></i>
                </div>
                <h2>ä¸ªæ€§åŒ–ä¸»é¢˜</h2>
                <p>é€‰æ‹©ä½ å–œæ¬¢çš„é¢œè‰²ä¸»é¢˜</p>
                <button class="btn" id="themeBtn">é€‰æ‹©é¢œè‰²</button>
                
                <div class="module-content" id="themeContent">
                    <div id="colorPicker">
                        <div class="color-option" style="background-color: #ffb6c1;" data-color="#ffb6c1"></div>
                        <div class="color-option" style="background-color: #a6e3e9;" data-color="#a6e3e9"></div>
                        <div class="color-option" style="background-color: #c7ceea;" data-color="#c7ceea"></div>
                        <div class="color-option" style="background-color: #ffd6a5;" data-color="#ffd6a5"></div>
                        <div class="color-option" style="background-color: #caffbf;" data-color="#caffbf"></div>
                    </div>
                </div>
            </div>
            
            <!-- å¯çˆ±ä¾¿ç­¾ -->
            <div class="card">
                <div class="card-icon">
                    <i class="fas fa-sticky-note"></i>
                </div>
                <h2>å¯çˆ±ä¾¿ç­¾</h2>
                <p>è®°å½•ä½ çš„æƒ³æ³•å’Œå¾…åŠäº‹é¡¹</p>
                <button class="btn" id="notesBtn">æ‰“å¼€ä¾¿ç­¾</button>
                
                <div class="module-content" id="notesContent">
                    <div class="notes-container">
                        <div class="note add-note" id="addNoteBtn">
                            <i class="fas fa-plus"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- è®°å¿†ç¿»ç‰Œæ¸¸æˆ -->
            <div class="card">
                <div class="card-icon">
                    <i class="fas fa-gamepad"></i>
                </div>
                <h2>è®°å¿†ç¿»ç‰Œæ¸¸æˆ</h2>
                <p>æŒ‘æˆ˜ä½ çš„è®°å¿†åŠ›ï¼Œæ‰¾åˆ°æ‰€æœ‰ç›¸åŒçš„è¡¨æƒ…</p>
                <button class="btn" id="gameBtn">å¼€å§‹æ¸¸æˆ</button>
                
                <div class="module-content" id="gameContent">
                    <div id="gameArea">
                        <p id="gameStatus">ç‚¹å‡»å¼€å§‹æ¸¸æˆæŒ‰é’®å¼€å§‹</p>
                        <div id="emojiGrid"></div>
                        <button class="btn" id="restartGameBtn">é‡æ–°å¼€å§‹</button>
                    </div>
                </div>
            </div>
            
            <!-- éŸ³ä¹æ’­æ”¾å™¨ -->
            <div class="card">
                <div class="card-icon">
                    <i class="fas fa-music"></i>
                </div>
                <h2>æ”¾æ¾éŸ³ä¹</h2>
                <p>æ’­æ”¾ä¸€äº›è½»æ¾çš„éŸ³ä¹æ”¾æ¾å¿ƒæƒ…</p>
                <button class="btn" id="musicBtn">æ‰“å¼€æ’­æ”¾å™¨</button>
                
                <div class="module-content" id="musicContent">
                    <div id="player">
                        <h3 style="text-align: center; color: #ff6b8b; margin-bottom: 15px;">æ”¾æ¾å¿ƒæƒ…çš„æ—‹å¾‹</h3>
                        <div class="player-controls">
                            <button class="player-btn" id="prevBtn"><i class="fas fa-backward"></i></button>
                            <button class="player-btn" id="playBtn"><i class="fas fa-play"></i></button>
                            <button class="player-btn" id="nextBtn"><i class="fas fa-forward"></i></button>
                        </div>
                        <p id="songTitle" style="text-align: center; margin-top: 15px; font-weight: bold;">çº¯éŸ³ä¹ - æ—…é›å­¤äº‘</p>
                    </div>
                </div>
            </div>
            
            <!-- æ¯æ—¥ä¸€å¥ -->
            <div class="card">
                <div class="card-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <h2>æ¯æ—¥ä¸€å¥</h2>
                <p>çœ‹çœ‹ä»Šå¤©æœ‰ä»€ä¹ˆæš–å¿ƒçš„è¯</p>
                <button class="btn" id="quoteBtn">æ˜¾ç¤ºä»Šæ—¥å¥å­</button>
                
                <div class="module-content" id="quoteContent">
                    <div id="quoteDisplay" style="text-align: center; padding: 20px; font-size: 1.2rem; color: #ff6b8b;">
                        <p>ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹ä»Šå¤©çš„æš–å¿ƒå¥å­</p>
                    </div>
                </div>
            </div>
            
            <!-- æ¶‚é¸¦æ¿ -->
            <div class="card">
                <div class="card-icon">
                    <i class="fas fa-paint-brush"></i>
                </div>
                <h2>åˆ›æ„æ¶‚é¸¦</h2>
                <p>åœ¨è¿™é‡Œéšæ„ç”»ç”»ï¼Œå‘æŒ¥ä½ çš„åˆ›æ„</p>
                <button class="btn" id="drawBtn">å¼€å§‹æ¶‚é¸¦</button>
                
                <div class="module-content" id="drawContent">
                    <div style="text-align: center;">
                        <canvas id="drawingCanvas" width="300" height="200" style="border: 2px dashed #ffb6c1; border-radius: 10px; background-color: white; cursor: crosshair;"></canvas>
                        <div style="margin-top: 15px;">
                            <button class="btn" id="clearCanvasBtn" style="width: auto; padding: 8px 15px; font-size: 0.9rem;">æ¸…é™¤ç”»æ¿</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
<!--        <footer>
            <p>è¿™ä¸ªç½‘ç«™å……æ»¡äº†å¯¹ä½ çš„çˆ±å’Œå¿ƒæ„ â¤ï¸</p>
            <p>å¸Œæœ›ä½ å–œæ¬¢è¿™é‡Œçš„æ¯ä¸€ä¸ªå°åŠŸèƒ½</p>
            <div class="love-message" id="loveMessage">äº²çˆ±çš„ï¼Œä½ æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€ç¾å¥½çš„å­˜åœ¨ï¼</div>
        </footer>-->
    </div>
    
    <script>
        // åˆ›å»ºè£…é¥°æ€§çˆ±å¿ƒ
        function createHearts() {
            const container = document.getElementById('heartsContainer');
            const heartCount = 25;
            
            for (let i = 0; i < heartCount; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = 'â¤ï¸';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.top = Math.random() * 100 + 'vh';
                heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                heart.style.opacity = Math.random() * 0.5 + 0.3;
                heart.style.animationDuration = (Math.random() * 8 + 4) + 's';
                heart.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(heart);
            }
        }
        
        // æ¨¡å—åˆ‡æ¢åŠŸèƒ½
        document.querySelectorAll('.btn').forEach(button => {
            button.addEventListener('click', function() {
                const moduleId = this.id.replace('Btn', 'Content');
                const module = document.getElementById(moduleId);
                
                // å¦‚æœæ¨¡å—å·²ç»æ˜¾ç¤ºï¼Œåˆ™éšè—å®ƒ
                if (module.classList.contains('active')) {
                    module.classList.remove('active');
                    this.textContent = this.textContent.replace('å…³é—­', 'æ‰“å¼€');
                } else {
                    // éšè—æ‰€æœ‰æ¨¡å—
                    document.querySelectorAll('.module-content').forEach(m => {
                        m.classList.remove('active');
                    });
                    
                    // é‡ç½®æ‰€æœ‰æŒ‰é’®æ–‡æœ¬
                    document.querySelectorAll('.btn').forEach(btn => {
                        const btnModuleId = btn.id.replace('Btn', 'Content');
                        if (btn.id !== this.id && document.getElementById(btnModuleId)) {
                            btn.textContent = btn.textContent.replace('å…³é—­', 'æ‰“å¼€');
                        }
                    });
                    
                    // æ˜¾ç¤ºå½“å‰æ¨¡å—
                    module.classList.add('active');
                    this.textContent = this.textContent.replace('æ‰“å¼€', 'å…³é—­');
                }
                
                // å¦‚æœæ˜¯æ¸¸æˆæ¨¡å—ï¼Œåˆå§‹åŒ–æ¸¸æˆ
                if (moduleId === 'gameContent' && !window.gameInitialized) {
                    initMemoryGame();
                    window.gameInitialized = true;
                }
                
                // å¦‚æœæ˜¯æ¶‚é¸¦æ¨¡å—ï¼Œåˆå§‹åŒ–ç”»æ¿
                if (moduleId === 'drawContent' && !window.canvasInitialized) {
                    initDrawingCanvas();
                    window.canvasInitialized = true;
                }
            });
        });
        
        // ä¸ªæ€§åŒ–ä¸»é¢˜åŠŸèƒ½
        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', function() {
                const color = this.getAttribute('data-color');
                document.documentElement.style.setProperty('--primary-color', color);
                
                // æ›´æ–°æ‰€æœ‰ç›¸å…³å…ƒç´ çš„é¢œè‰²
                document.querySelectorAll('header, footer').forEach(el => {
                    el.style.background = `linear-gradient(135deg, ${color} 0%, ${lightenColor(color, 20)} 100%)`;
                });
                
                document.querySelectorAll('.btn').forEach(btn => {
                    btn.style.background = `linear-gradient(to right, ${color}, ${lightenColor(color, 10)})`;
                });
                
                // æ˜¾ç¤ºé€‰æ‹©åé¦ˆ
                this.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 300);
            });
        });
        
        // é¢œè‰²è¾…åŠ©å‡½æ•°
        function lightenColor(color, percent) {
            const num = parseInt(color.replace('#', ''), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            
            return '#' + (
                0x1000000 + 
                (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + 
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + 
                (B < 255 ? B < 1 ? 0 : B : 255)
            ).toString(16).slice(1);
        }
        
        // ä¾¿ç­¾åŠŸèƒ½
        document.getElementById('addNoteBtn').addEventListener('click', function() {
            const notesContainer = document.querySelector('.notes-container');
            const noteCount = document.querySelectorAll('.note').length;
            
            if (noteCount >= 6) {
                alert('æœ€å¤šåªèƒ½åˆ›å»º6ä¸ªä¾¿ç­¾å“¦ï¼');
                return;
            }
            
            const note = document.createElement('div');
            note.className = 'note';
            note.style.transform = `rotate(${Math.random() * 6 - 3}deg)`;
            
            const textarea = document.createElement('textarea');
            textarea.placeholder = 'å†™ä¸‹ä½ çš„æƒ³æ³•...';
            
            // ä¿å­˜ä¾¿ç­¾å†…å®¹
            textarea.addEventListener('input', function() {
                saveNotes();
            });
            
            const deleteBtn = document.createElement('button');
            deleteBtn.innerHTML = 'Ã—';
            deleteBtn.style.position = 'absolute';
            deleteBtn.style.top = '5px';
            deleteBtn.style.right = '5px';
            deleteBtn.style.background = '#ff6b8b';
            deleteBtn.style.color = 'white';
            deleteBtn.style.border = 'none';
            deleteBtn.style.borderRadius = '50%';
            deleteBtn.style.width = '20px';
            deleteBtn.style.height = '20px';
            deleteBtn.style.fontSize = '14px';
            deleteBtn.style.cursor = 'pointer';
            deleteBtn.style.display = 'none';
            
            note.addEventListener('mouseenter', function() {
                deleteBtn.style.display = 'block';
            });
            
            note.addEventListener('mouseleave', function() {
                deleteBtn.style.display = 'none';
            });
            
            deleteBtn.addEventListener('click', function() {
                note.remove();
                saveNotes();
            });
            
            note.appendChild(textarea);
            note.appendChild(deleteBtn);
            
            // åœ¨æ·»åŠ æŒ‰é’®å‰æ’å…¥æ–°ä¾¿ç­¾
            notesContainer.insertBefore(note, this);
            
            // èšç„¦åˆ°æ–°ä¾¿ç­¾
            textarea.focus();
            
            saveNotes();
        });
        
        // ä¿å­˜ä¾¿ç­¾åˆ°æœ¬åœ°å­˜å‚¨
        function saveNotes() {
            const notes = [];
            document.querySelectorAll('.note textarea').forEach((textarea, index) => {
                if (textarea.parentElement.id !== 'addNoteBtn') {
                    notes.push(textarea.value);
                }
            });
            localStorage.setItem('cuteNotes', JSON.stringify(notes));
        }
        
        // åŠ è½½ä¾¿ç­¾
        function loadNotes() {
            const savedNotes = JSON.parse(localStorage.getItem('cuteNotes') || '[]');
            const notesContainer = document.querySelector('.notes-container');
            const addNoteBtn = document.getElementById('addNoteBtn');
            
            savedNotes.forEach(noteText => {
                const note = document.createElement('div');
                note.className = 'note';
                note.style.transform = `rotate(${Math.random() * 6 - 3}deg)`;
                
                const textarea = document.createElement('textarea');
                textarea.value = noteText;
                
                textarea.addEventListener('input', function() {
                    saveNotes();
                });
                
                const deleteBtn = document.createElement('button');
                deleteBtn.innerHTML = 'Ã—';
                deleteBtn.style.position = 'absolute';
                deleteBtn.style.top = '5px';
                deleteBtn.style.right = '5px';
                deleteBtn.style.background = '#ff6b8b';
                deleteBtn.style.color = 'white';
                deleteBtn.style.border = 'none';
                deleteBtn.style.borderRadius = '50%';
                deleteBtn.style.width = '20px';
                deleteBtn.style.height = '20px';
                deleteBtn.style.fontSize = '14px';
                deleteBtn.style.cursor = 'pointer';
                deleteBtn.style.display = 'none';
                
                note.addEventListener('mouseenter', function() {
                    deleteBtn.style.display = 'block';
                });
                
                note.addEventListener('mouseleave', function() {
                    deleteBtn.style.display = 'none';
                });
                
                deleteBtn.addEventListener('click', function() {
                    note.remove();
                    saveNotes();
                });
                
                note.appendChild(textarea);
                note.appendChild(deleteBtn);
                
                notesContainer.insertBefore(note, addNoteBtn);
            });
        }
        
        // è®°å¿†ç¿»ç‰Œæ¸¸æˆ
        function initMemoryGame() {
            const emojis = ['ğŸ¶', 'ğŸ±', 'ğŸ°', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼', 'ğŸ¨', 'ğŸ¯', 'ğŸ¶', 'ğŸ±', 'ğŸ°', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼', 'ğŸ¨', 'ğŸ¯'];
            const gameGrid = document.getElementById('emojiGrid');
            const gameStatus = document.getElementById('gameStatus');
            
            let flippedCards = [];
            let matchedPairs = 0;
            let gameStarted = false;
            
            // æ´—ç‰Œç®—æ³•
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
            
            function createGameBoard() {
                gameGrid.innerHTML = '';
                const shuffledEmojis = shuffleArray([...emojis]);
                
                shuffledEmojis.forEach(emoji => {
                    const card = document.createElement('div');
                    card.className = 'emoji-card';
                    card.dataset.emoji = emoji;
                    card.innerHTML = '?';
                    
                    card.addEventListener('click', () => flipCard(card));
                    gameGrid.appendChild(card);
                });
                
                gameStatus.textContent = "ç‚¹å‡»å¡ç‰‡å¼€å§‹æ¸¸æˆï¼æ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„å¯¹å­ã€‚";
                flippedCards = [];
                matchedPairs = 0;
                gameStarted = true;
            }
            
            function flipCard(card) {
                if (!gameStarted) return;
                
                // å¦‚æœå¡ç‰‡å·²ç»ç¿»è½¬æˆ–åŒ¹é…ï¼Œåˆ™å¿½ç•¥ç‚¹å‡»
                if (card.classList.contains('flipped') || flippedCards.length >= 2) {
                    return;
                }
                
                // ç¿»è½¬å¡ç‰‡
                card.classList.add('flipped');
                card.innerHTML = card.dataset.emoji;
                flippedCards.push(card);
                
                // å¦‚æœç¿»è½¬äº†ä¸¤å¼ å¡ç‰‡ï¼Œæ£€æŸ¥æ˜¯å¦åŒ¹é…
                if (flippedCards.length === 2) {
                    const [card1, card2] = flippedCards;
                    
                    if (card1.dataset.emoji === card2.dataset.emoji) {
                        // åŒ¹é…æˆåŠŸ
                        matchedPairs++;
                        flippedCards = [];
                        
                        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
                        if (matchedPairs === emojis.length / 2) {
                            setTimeout(() => {
                                gameStatus.textContent = "æ­å–œï¼ä½ æ‰¾åˆ°äº†æ‰€æœ‰åŒ¹é…çš„å¯¹å­ï¼ğŸ‰";
                                gameStarted = false;
                            }, 500);
                        } else {
                            gameStatus.textContent = `åŒ¹é…æˆåŠŸï¼å·²æ‰¾åˆ° ${matchedPairs} å¯¹ã€‚ç»§ç»­åŠ æ²¹ï¼`;
                        }
                    } else {
                        // ä¸åŒ¹é…ï¼Œç¿»è½¬å›å»
                        gameStatus.textContent = "ä¸åŒ¹é…ï¼Œå†è¯•è¯•çœ‹ï¼";
                        setTimeout(() => {
                            card1.classList.remove('flipped');
                            card2.classList.remove('flipped');
                            card1.innerHTML = '?';
                            card2.innerHTML = '?';
                            flippedCards = [];
                        }, 1000);
                    }
                }
            }
            
            // åˆå§‹åŒ–æ¸¸æˆæ¿
            createGameBoard();
            
            // é‡æ–°å¼€å§‹æŒ‰é’®
            document.getElementById('restartGameBtn').addEventListener('click', createGameBoard);
        }
        
        // éŸ³ä¹æ’­æ”¾å™¨åŠŸèƒ½
        const songs = [
            { title: "çº¯éŸ³ä¹ - æ—…é›å­¤äº‘", src: "lygy.mp3" }
        ];
        
        let currentSongIndex = 0;
        let audio = new Audio(songs[currentSongIndex].src);
        let isPlaying = false;
        
        document.getElementById('playBtn').addEventListener('click', function() {
            if (isPlaying) {
                audio.pause();
                this.innerHTML = '<i class="fas fa-play"></i>';
                isPlaying = false;
            } else {
                audio.play();
                this.innerHTML = '<i class="fas fa-pause"></i>';
                isPlaying = true;
            }
        });
        
        document.getElementById('prevBtn').addEventListener('click', function() {
            currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
            changeSong();
        });
        
        document.getElementById('nextBtn').addEventListener('click', function() {
            currentSongIndex = (currentSongIndex + 1) % songs.length;
            changeSong();
        });
        
        function changeSong() {
            audio.pause();
            audio = new Audio(songs[currentSongIndex].src);
            document.getElementById('songTitle').textContent = songs[currentSongIndex].title;
            
            if (isPlaying) {
                audio.play();
            }
        }
        
        // æ¯æ—¥ä¸€å¥åŠŸèƒ½
        const quotes = [
            "ä½ æ˜¯ä¸–ç•Œä¸Šæœ€å¯çˆ±çš„äººï¼Œæˆ‘æ¯å¤©éƒ½æ„Ÿè°¢å‘½è¿è®©æˆ‘é‡è§ä½ ã€‚",
            "ä½ çš„å¾®ç¬‘æ˜¯æˆ‘ä¸€å¤©ä¸­æœ€æœŸå¾…çœ‹åˆ°çš„ç”»é¢ã€‚",
            "å’Œä½ åœ¨ä¸€èµ·çš„æ¯ä¸€åˆ»ï¼Œéƒ½æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€ç¾å¥½çš„æ—¶å…‰ã€‚",
            "ä½ çš„å­˜åœ¨è®©æˆ‘çš„ä¸–ç•Œå˜å¾—å®Œæ•´è€Œç¾å¥½ã€‚",
            "æ— è®ºå‘ç”Ÿä»€ä¹ˆï¼Œæˆ‘éƒ½ä¼šä¸€ç›´çˆ±ä½ ã€æ”¯æŒä½ ã€‚",
            "ä½ çš„å–„è‰¯å’Œæ¸©æŸ”è®©æˆ‘æ¯å¤©éƒ½æ„Ÿåˆ°å¹¸ç¦ã€‚",
            "æ„Ÿè°¢ä½ å‡ºç°åœ¨æˆ‘çš„ç”Ÿå‘½é‡Œï¼Œè®©æˆ‘çš„ä¸–ç•Œå……æ»¡é˜³å…‰ã€‚",
            "ä½ æ˜¯æˆ‘å¿ƒä¸­æœ€ç‰¹åˆ«çš„äººï¼Œæ— äººå¯ä»¥æ›¿ä»£ã€‚",
            "å’Œä½ åœ¨ä¸€èµ·çš„æ¯ä¸€å¤©éƒ½åƒæ˜¯æƒ…äººèŠ‚ã€‚",
            "ä½ çš„å¿«ä¹å°±æ˜¯æˆ‘æœ€å¤§çš„å¹¸ç¦ã€‚"
        ];
        
        document.getElementById('quoteBtn').addEventListener('click', function() {
            const randomIndex = Math.floor(Math.random() * quotes.length);
            document.getElementById('quoteDisplay').innerHTML = `<p>"${quotes[randomIndex]}"</p>`;
        });
        
        // æ¶‚é¸¦æ¿åŠŸèƒ½
        function initDrawingCanvas() {
            const canvas = document.getElementById('drawingCanvas');
            const ctx = canvas.getContext('2d');
            const clearBtn = document.getElementById('clearCanvasBtn');
            
            // è®¾ç½®åˆå§‹ç”»ç¬”å±æ€§
            ctx.strokeStyle = '#ff6b8b';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            
            let drawing = false;
            let lastX = 0;
            let lastY = 0;
            
            // è°ƒæ•´ç”»å¸ƒå¤§å°
            function resizeCanvas() {
                const container = canvas.parentElement;
                const maxWidth = Math.min(container.clientWidth - 40, 500);
                
                canvas.width = maxWidth;
                canvas.height = maxWidth * 0.66;
                
                // é‡ç»˜ç”»å¸ƒå†…å®¹
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                ctx.putImageData(imageData, 0, 0);
            }
            
            // å¼€å§‹ç»˜ç”»
            function startDrawing(e) {
                drawing = true;
                [lastX, lastY] = getMousePos(canvas, e);
            }
            
            // ç»˜ç”»è¿‡ç¨‹
            function draw(e) {
                if (!drawing) return;
                
                e.preventDefault();
                
                const [x, y] = getMousePos(canvas, e);
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                [lastX, lastY] = [x, y];
            }
            
            // åœæ­¢ç»˜ç”»
            function stopDrawing() {
                drawing = false;
            }
            
            // è·å–é¼ æ ‡ä½ç½®
            function getMousePos(canvas, evt) {
                const rect = canvas.getBoundingClientRect();
                let clientX, clientY;
                
                if (evt.type.includes('touch')) {
                    clientX = evt.touches[0].clientX;
                    clientY = evt.touches[0].clientY;
                } else {
                    clientX = evt.clientX;
                    clientY = evt.clientY;
                }
                
                return [
                    clientX - rect.left,
                    clientY - rect.top
                ];
            }
            
            // æ¸…é™¤ç”»å¸ƒ
            function clearCanvas() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
            
            // äº‹ä»¶ç›‘å¬å™¨
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // è§¦æ‘¸äº‹ä»¶æ”¯æŒ
            canvas.addEventListener('touchstart', function(e) {
                e.preventDefault();
                startDrawing(e);
            });
            
            canvas.addEventListener('touchmove', function(e) {
                e.preventDefault();
                draw(e);
            });
            
            canvas.addEventListener('touchend', stopDrawing);
            
            clearBtn.addEventListener('click', clearCanvas);
            
            // åˆå§‹è°ƒæ•´ç”»å¸ƒå¤§å°
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
        }
        
        // çˆ±å¿ƒæ¶ˆæ¯è½®æ¢
        const loveMessages = [
            "äº²çˆ±çš„ï¼Œä½ æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€ç¾å¥½çš„å­˜åœ¨ï¼",
            "æ¯å¤©æƒ³åˆ°ä½ ï¼Œæˆ‘çš„å¿ƒé‡Œéƒ½å……æ»¡äº†æ¸©æš–ã€‚",
            "å’Œä½ åœ¨ä¸€èµ·çš„æ¯ä¸€ç§’éƒ½æ˜¯æˆ‘çè—çš„å®è—ã€‚",
            "ä½ çš„ç¬‘å®¹æ˜¯æˆ‘æ¯å¤©æœ€å¤§çš„åŠ¨åŠ›ã€‚",
            "çˆ±ä½ æ˜¯æˆ‘åšè¿‡æœ€æ­£ç¡®çš„å†³å®šã€‚"
        ];
        
        function rotateLoveMessage() {
            const messageElement = document.getElementById('loveMessage');
            let currentIndex = 0;
            
            setInterval(() => {
                currentIndex = (currentIndex + 1) % loveMessages.length;
                messageElement.textContent = loveMessages[currentIndex];
            }, 5000);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', () => {
            createHearts();
            loadNotes();
            rotateLoveMessage();
            
            // éšæœºæ˜¾ç¤ºä¸€ä¸ªæ¯æ—¥ä¸€å¥
            const randomIndex = Math.floor(Math.random() * quotes.length);
            document.getElementById('quoteDisplay').innerHTML = `<p>"${quotes[randomIndex]}"</p>`;
        });
    </script>
</body>
</html>
